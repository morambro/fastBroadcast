\newpage
\section{Conclusions}

	Our Android framework represents a usable tool to develop testbed applications on common devices (e.g. Android smartphones or tablets). Unfortunately, due to \direct and, more specifically, Android \direct Framework implementation limits, we were forced to adopt several workarounds to simulate a true ad-hoc network communication: we exploited Android \direct framework to create a small network between the various peers and made them communicate via TCP/UDP Sockets, which imposes a heavy network load on the peer which acts as a server. Moreover, the overhead introduced by the TCP protocol and the execution under the Java Virtual Machine, with reduced computational power provided by used devices, resulted in a difficult validation of the the application results, and adds a significant amount of complexity to the coordination of different devices.
	Devices involved in the simulation can only be added at configuration time, but this in fact is not a problem, since an initial coordination between them is necessary in order to assign initial positions and the number of positions to skyp when a device have to change his virtual location. 
	% TODO : da sistemare!!!
	The power of this framework is noticeable when a real simulation is needed: exploiting devices' GPS system, vehicolar networks protocols can be tested simply carring Android devices on real vehicles. 
	
	Our Desktop framework adopts a faster and more dynamic method to transmit data: since in general Vehicolar algorithms do not need a complete network in order to exchange messages (they are basically stateless and connectionless), a correct solution involves the use of Data Link level raw sockets to implement a light, connectionless protocol in order to achieve a real ad-hoc network and a behaviour closer to the theoretical. This was implemented on the Fedora operating system (theoretically should work under every linux distribution, but we experienced inconsistencies with Ubuntu distributions and its derivates, so we reccomend the use of a Fedora operating system). We also tried to port the raw socket library on a Nexus 7, but unfortunately the lack of essential modules and the inability to use Monitor Mode (it is not supported in most mobile network chipsets) resulted in a failure. Future works will focus on bringing  
	%Unfortunately, after several days of coding and research, we found that in order to obtain all traffic detectable from a device \textit{promiscuous mode} was not sufficient, but an even more battery-comsuming mode was needed, usually referred to as \textit{monitor mode}. Moreover, support for such mode is heavily hardware dependent (not all hardwares support it) and requires direct calls to the network interface device driver, requiring different codes for each device. We concluded that, for the purposes of this project, this was not acceptable in terms of required time and added complexity (considering that, in addition to the forking needed by specific device drivers, the use of unstable and undocumented Android APIs was needed to achieve inter-process communication between the native code, which would be running with root privileges, and the standard Java application).

